<div class="popup_modal">
    <div class="modal fade show" id="review_modal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div>
                        <h5 id="modal_title_with_id">Add Review</h5>
                        <%= image_tag('new_icons/close.svg', data: { dismiss: 'modal' }, aria: { label: 'Close' }, alt: 'close', class: 'close_modal_icon') %>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="new_design">                       
                        <div class="form_design_1 epnf_container">                            
                            <%= form_tag(method: :post, controller: 'ratings', action: 'create') do %>
                                <div class="input_w_label" style="text-align: center;">
                                  <p id="id"></p>
                                  <p id="name" style="font-size: 18px; color: #2bd6ce;"></p>
                                  <br>
                                  <img src="" id="img" style="width: 25%;"/>
                                </div>                                
                                <%= hidden_field_tag :review_star, '', id: 'star_rating_field' %>
                                <%= hidden_field_tag :product_id, '', id: 'product' %>
                                <%= hidden_field_tag :order_id, '', id: 'order' %>
                                <div class="separator20"></div>
                                <div class="star-rating" style="text-align: center;">
                                  <% (1..3).each do |star| %>  
                                    <i class="fa fa-star" 
                                       data-star="<%= star %>"
                                       data-toggle="tooltip" 
                                       data-placement="top" 
                                       title="<%= star %> Stars"></i>
                                  <% end %>
                                </div>
                                <div class="separator20"></div>
                                <div class="separator20"></div>
                                <p class="side_button2">
                                    <button type="submit">Add Rating<%= image_tag("new_icons/proceed_arrow_white.svg", alt:"proceed_arrow_white") %></button>
                                </p>
                            <% end %>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>    
    document.querySelectorAll('.star-rating i').forEach(function(star) {
        star.addEventListener('click', function() {            
            var rating = this.getAttribute('data-star');            
            document.getElementById('star_rating_field').value = rating;            
            document.querySelectorAll('.star-rating i').forEach(function(s) {
                if (parseInt(s.getAttribute('data-star')) <= rating) {
                    s.classList.add('text-warning'); 
                } else {
                    s.classList.remove('text-warning'); 
                }
            });
        });
    });
</script>
